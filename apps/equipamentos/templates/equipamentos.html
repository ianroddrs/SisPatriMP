{% extends 'main.html' %}
{% load static %}

{% block static %}
  <script src="{% static 'js/equipamentos.js' %}" defer></script>
{% endblock %}

{% block content %}

<article class="container-fluid">
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-form">Adicionar</button>

  <div class="modal fade" id="modal-form">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="titutlo-modal">Cadastrar equipamento</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-primary" onclick="enviarDados()">Salvar</button>
        </div>
      </div>
    </div>
  </div>



  <ul class="nav nav-tabs mt-3">
    <li class="nav-item">
      <a class="nav-link " href="#">Todos</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" href="#">Computadores</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Monitores</a>
    </li>
    <li class="nav-item d-none d-md-block">
      <a class="nav-link" href="#">Scanners e Impressoras</a>
    </li>
    <li class="nav-item d-none d-md-block">
      <a class="nav-link" href="#">Outros</a>
    </li>
  </ul>




  <div class="table-responsive border border-top-0" >
    <table class="table table-borderless table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Polo</th>
          <th scope="col">Cidade</th>
          <th scope="col">Local</th>
          <th scope="col">Tipo</th>
          <th scope="col">Patrimônio</th>
          <th scope="col">Nome Equipamento</th>
          <th scope="col">Descrição</th>
          <th scope="col">Fabrincante</th>
          <th scope="col">MAC</th>
          <th scope="col">Observação</th>
          <th scope="col">Última Movimentação</th>
        </tr>
      </thead>
      <tbody>
          {% for equipamento in equipamentos %}
          <tr>
            <th scope="row">{{forloop.counter}}</th>
            <td>{{ equipamento.local.cidade.polo }}</td>
            <td>{{ equipamento.local.cidade.nome }}</td>
            <td>{{ equipamento.local.nome }}</td>
            <td>{{ equipamento.tipo }}</td>
            <td>{{ equipamento.patrimonio }}</td>
            <td>{{ equipamento.nome_equipamento }}</td>
            <td>{{ equipamento.descricao }}</td>
            <td>{{ equipamento.fabricante }}</td>
            <td>{{ equipamento.mac }}</td>
            <td>{{ equipamento.observacao }}</td>
            <td>{{equipamento.historico_movimentacao.all.last.data_movimentacao|date:"d/m/Y H:s" }}</td>
          </tr>
          {% endfor %}
      </tbody>
    </table>
  </div>
</article>



{% endblock %}